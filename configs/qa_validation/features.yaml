# ============================================
# QA Validation - Feature Extraction Thresholds
# ============================================
# Thresholds for Sentiment Analysis and Readability Analysis validation
# Source: thoughts/shared/research/2025-12-03_21-32_sentiment_readability_qa_metrics.md

categories:
  sentiment_analysis:
    display_name: Sentiment Analysis
    description: Dictionary coverage and feature extraction

  readability_analysis:
    display_name: Readability Analysis
    description: Index accuracy and score validation

thresholds:
  # -------------------------
  # Sentiment Analysis
  # -------------------------
  sentiment_analysis:
    lm_dictionary_word_count:
      display_name: LM Dictionary Size
      metric_type: count
      target: 4000
      operator: ">="
      blocking: true
      description: Loughran-McDonald dictionary word count
      tags: [sentiment, dictionary]

    category_coverage:
      display_name: Category Coverage
      metric_type: count
      target: 8
      operator: ">="
      blocking: true
      description: Number of sentiment categories covered
      tags: [sentiment, dictionary]

    dictionary_load_time:
      display_name: Dictionary Load Time
      metric_type: latency
      unit: seconds
      target: 0.5
      operator: "<="
      blocking: false
      description: Time to load LM dictionary (with pickle cache)
      tags: [sentiment, performance]

    feature_field_count:
      display_name: Sentiment Feature Count
      metric_type: count
      target: 30
      operator: ">="
      blocking: true
      description: Number of sentiment features extracted
      tags: [sentiment, features]

  # -------------------------
  # Readability Analysis
  # -------------------------
  readability_analysis:
    standard_index_count:
      display_name: Standard Index Count
      metric_type: count
      target: 6
      operator: ">="
      blocking: true
      description: Number of standard readability indices (FK, Fog, SMOG, etc.)
      tags: [readability, indices]

    financial_adjustment_word_count:
      display_name: Financial Adjustment Words
      metric_type: count
      target: 200
      operator: ">="
      blocking: true
      description: Financial domain words excluded from complexity
      tags: [readability, adjustments]

    obfuscation_score_range_min:
      display_name: Obfuscation Score Min
      metric_type: count
      target: 0
      operator: ">="
      blocking: true
      description: Minimum obfuscation score
      tags: [readability, scores]

    obfuscation_score_range_max:
      display_name: Obfuscation Score Max
      metric_type: count
      target: 100
      operator: "<="
      blocking: true
      description: Maximum obfuscation score
      tags: [readability, scores]

    readability_feature_count:
      display_name: Readability Feature Count
      metric_type: count
      target: 22
      operator: ">="
      blocking: true
      description: Number of readability features extracted
      tags: [readability, features]

  # -------------------------
  # Sentiment Validation Metrics
  # -------------------------
  sentiment_validation:
    lm_hit_rate:
      display_name: LM Dictionary Hit Rate
      metric_type: rate
      unit: "%"
      target: 0.02
      operator: ">="
      warn_threshold: 0.015
      blocking: true
      description: Percentage of tokens found in LM dictionary (should be >2% for 10-Ks)
      tags: [sentiment, validation, quality]

    zero_vector_rate:
      display_name: Zero-Vector Rate
      metric_type: rate
      unit: "%"
      target: 0.50
      operator: "<="
      warn_threshold: 0.60
      blocking: true
      description: Percentage of segments with no sentiment words (should be <50%)
      tags: [sentiment, validation, quality]

    polarity_ratio_negative_gt_positive:
      display_name: Negative > Positive Ratio
      metric_type: boolean
      target: true
      blocking: true
      description: Risk Factors should have more negative than positive words
      tags: [sentiment, validation, domain]

    uncertainty_negative_correlation:
      display_name: Uncertainty-Negative Correlation
      metric_type: score
      target: 0.3
      operator: ">="
      warn_threshold: 0.2
      blocking: false
      description: Risk and uncertainty words should correlate
      tags: [sentiment, validation, domain]

  # -------------------------
  # Readability Validation Metrics
  # -------------------------
  readability_validation:
    gunning_fog_avg:
      display_name: Gunning Fog Average
      metric_type: score
      target: 14.0
      min_value: 14.0
      max_value: 22.0
      operator: "[]"
      warn_threshold: 12.0
      blocking: true
      description: Average Gunning Fog index should be 14-22 for 10-K Risk Factors
      tags: [readability, validation, quality]

    gunning_fog_min:
      display_name: Gunning Fog Minimum
      metric_type: score
      target: 8.0
      operator: ">="
      warn_threshold: 6.0
      blocking: false
      description: Minimum Fog score should be >8 (avoid over-splitting)
      tags: [readability, validation, quality]

    gunning_fog_max:
      display_name: Gunning Fog Maximum
      metric_type: score
      target: 35.0
      operator: "<="
      warn_threshold: 40.0
      blocking: false
      description: Maximum Fog score should be <35 (avoid missing periods)
      tags: [readability, validation, quality]

    metric_correlation_fk_fog:
      display_name: FK-Fog Correlation
      metric_type: score
      target: 0.7
      operator: ">="
      warn_threshold: 0.6
      blocking: true
      description: Flesch-Kincaid and Gunning Fog should correlate (>0.7)
      tags: [readability, validation, consistency]

    metric_correlation_fk_ari:
      display_name: FK-ARI Correlation
      metric_type: score
      target: 0.7
      operator: ">="
      warn_threshold: 0.6
      blocking: true
      description: Flesch-Kincaid and ARI should correlate (>0.7)
      tags: [readability, validation, consistency]

    financial_adjustment_delta:
      display_name: Financial Adjustment Delta
      metric_type: rate
      unit: "%"
      target: 0.005
      operator: ">="
      warn_threshold: 0.003
      blocking: false
      description: Financial term adjustment should reduce complexity by >0.5%
      tags: [readability, validation, domain]

    obfuscation_score_avg:
      display_name: Obfuscation Score Average
      metric_type: score
      min_value: 35.0
      max_value: 80.0
      operator: "[]"
      blocking: false
      description: Average obfuscation score for Risk Factors (35-80)
      tags: [readability, validation, custom]

    obfuscation_complexity_correlation:
      display_name: Obfuscation-Complexity Correlation
      metric_type: score
      target: 0.6
      operator: ">="
      warn_threshold: 0.5
      blocking: false
      description: Obfuscation score should correlate with complexity (>0.6)
      tags: [readability, validation, custom]
